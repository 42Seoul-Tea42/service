(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{8869:function(e,r,a){Promise.resolve().then(a.bind(a,7221))},1157:function(e,r,a){"use strict";var n=a(657);r.Z=function(e){let{visible:r}=e;return(0,n.jsx)("div",{className:r?"":"hidden",children:(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("div",{className:"fixed w-full h-full bg-black opacity-50 flex justify-center items-center",children:(0,n.jsxs)("div",{role:"status",children:[(0,n.jsxs)("svg",{"aria-hidden":"true",className:"w-24 h-24 text-gray-200 animate-spin dark:text-gray-600 fill-green-500",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),(0,n.jsx)("span",{className:"sr-only",children:"Loading..."})]})})})})}},3417:function(e,r,a){"use strict";var n=a(657),t=a(1157);r.Z=e=>{let{onSubmit:r,subject:a,inputs:s,button:i,loading:l}=e;return(0,n.jsx)("div",{className:"w-full h-screen flex justify-center bg-green-50",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r&&r()},className:"max-w-md min-w-96 min-h-24 p-6 bg-white border border-gray-200 rounded-lg shadow",children:[(0,n.jsx)("h5",{className:"text-lg font-semibold mb-5 underline decoration-wavy decoration-pink-500/50",children:a}),s,(0,n.jsx)("div",{className:"flex justify-end",children:i})]}),(0,n.jsx)(t.Z,{visible:l})]})})}},410:function(e,r,a){"use strict";a.d(r,{Z:function(){return m}});var n=a(9841);let t=new(a(5372)).Z,s=e=>t.get(e);var i=a(2038);let l=async e=>{let r=o(e.response.data.msg);return r===i.gx.accessToken?u(e.config):(r===i.gx.refreshToken&&(c(),alert("로그인 후 이용해주세요.")),Promise.reject(e))},o=e=>e&&e.includes("refresh")?i.gx.refreshToken:i.gx.accessToken,d=async()=>{try{await m.patch("/user/reset-token",null,{headers:{"Content-Type":"application/json"}})}catch(e){throw e}},u=async e=>{try{return await d(),m(e)}catch(e){c()}},c=()=>{window.location.href=i.AW.LOGIN},g=async e=>{let r=await m.get("/user/login");200===r.status&&(!1===r.data.email_check?window.location.href=i.AW.VERIFY_EMAIL:!1===r.data.profile_check?window.location.href=i.AW.PROFILE:!1===r.data.emoji_check&&(window.location.href=i.AW.EMOJI))};var f=a(1749);let h=n.Z.create({baseURL:f.env.NEXT_PUBLIC_DOMAIN+"/api",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:1e4});h.interceptors.request.use(e=>{let r=localStorage.getItem("user-location");if(r){let{latitude:a,longitude:n}=JSON.parse(r);e.headers["x-user-longitude"]="".concat(n),e.headers["x-user-latitude"]="".concat(a)}let a=s("csrf_access_token");return e.headers["X-CSRF-TOKEN"]=a,e},e=>Promise.reject(e)),h.interceptors.response.use(e=>e,async e=>{switch(e.response.status){case 401:return await l(e);case 403:g(e)}return Promise.reject(e)});var m=h},7221:function(e,r,a){"use strict";a.r(r);var n=a(657),t=a(7789),s=a(129),i=a(7580),l=a(3417),o=a(2038),d=a(1561);function u(){let e=(0,t.useSearchParams)(),r=(0,s.I0)(),a=(0,t.useRouter)(),u=e.get("key");(0,i.useEffect)(()=>{u&&r((0,d.XY)(u))},[]);let c=(0,s.v9)(e=>e.loginSlice.steps.emailCheck);(0,i.useEffect)(()=>{c&&a.push(o.AW.LOGIN)},[c]);let g=(0,s.v9)(e=>e.loginSlice.error);return(0,n.jsx)(l.Z,{onSubmit:()=>r((0,d.FE)()),subject:"이메일 인증을 진행하는 중입니다.",inputs:(0,n.jsx)("p",{className:"text-red-500",children:g}),button:(0,n.jsx)("button",{name:"skeleton",type:"button",onClick:()=>a.push(o.AW.LOGIN),className:"w-relative hover:brightness-75 h-10 p-2 border border-green-300 bg-green-300 rounded-full",children:(0,n.jsx)("span",{className:"flex font-bold text-gray-700",children:" 로그인 하러가기"})})})}r.default=function(){return(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(u,{})})}},9524:function(e,r,a){"use strict";a.d(r,{S:function(){return t}});let n=new Map([["id","id"],["login_id","loginId"],["name","firstname"],["last_name","lastname"],["email","email"],["pw","password"],["age","age"],["fame","rating"],["gender","gender"],["taste","sexualPreference"],["bio","introduction"],["pictures","pictures"],["tags","interests"],["hate_tags","hateInterests"],["emoji","emoji"],["hate_emoji","hateEmoji"],["similar","similar"],["fancy","fancy"],["email_check","emailCheck"],["profile_check","profileCheck"],["emoji_check","emojiCheck"],["picture","picture"],["time","time"],["distance","distance"],["oauth","oauth"],["occupied","occupied"],["error","error"],["new","new"],["status","status"],["sender_id","senderId"],["message","message"],["msg_time","time"],["last_online","lastOnline"],["target_id","targetId"],["status","status"],["oauth","oauth"]]);function t(e){let r={};for(let a in e){let t=n.get(a);t?("distance"===t&&(e[a]=Math.round(e[a])),r[t]=e[a]):r[a]=e[a]}return r}},2038:function(e,r,a){"use strict";var n,t,s,i,l,o,d,u,c,g,f,h,m,p,C,E;a.d(r,{AW:function(){return u},As:function(){return l},SV:function(){return N},Y0:function(){return n},bv:function(){return s},gx:function(){return o},qb:function(){return i},wN:function(){return d},z:function(){return t}}),(c=n||(n={}))[c.NONE=0]="NONE",c[c.OTHER=1]="OTHER",c[c.FEMALE=2]="FEMALE",c[c.MALE=4]="MALE",c[c.ALL=7]="ALL",(g=t||(t={}))[g.NONE=0]="NONE",g[g.SEND=1]="SEND",g[g.RECV=2]="RECV",g[g.CONN=3]="CONN",(f=s||(s={}))[f.NONE_AGE=0]="NONE_AGE",f[f.MIN_AGE=1]="MIN_AGE",f[f.PHOTO_COUNT=5]="PHOTO_COUNT",f[f.EMAIL=30]="EMAIL",f[f.PASSWORD=16]="PASSWORD",f[f.ID=20]="ID",f[f.NAME=10]="NAME";let N={send:"border-gray-100",recv:"border-green-400",connect:"border-pink-400",none:"border-gray-100",thumbConn:"pink",thumbSend:"green",thumbNone:"gray"};(h=i||(i={}))[h.OFFLINE=0]="OFFLINE",h[h.ONLINE=1]="ONLINE",(m=l||(l={}))[m.NONE=0]="NONE",m[m.KAKAO=1]="KAKAO",m[m.GOOGLE=2]="GOOGLE",m[m.EMAIL=3]="EMAIL",(p=o||(o={}))[p.refreshToken=0]="refreshToken",p[p.accessToken=1]="accessToken",(C=d||(d={}))[C.NONE=0]="NONE",C[C.BULLY=1]="BULLY",C[C.CONTENT=2]="CONTENT",C[C.FAKE=3]="FAKE",C[C.SPAM=4]="SPAM",C[C.MISINFORM=5]="MISINFORM",C[C.VIOLATION=6]="VIOLATION",C[C.PRIVACY=7]="PRIVACY",C[C.SUSPICIOUS=8]="SUSPICIOUS",C[C.OTHER=9]="OTHER",(E=u||(u={})).HOME="/home",E.LOGIN="/auth/login",E.EMOJI="/auth/upload/emoji",E.PROFILE="/auth/upload/profile",E.VERIFY_EMAIL="/auth/verify-email",E.SIGNUP="/auth/signup",E.SETTING="/setting",E.RESET_PASSWORD="/auth/reset-password"},1561:function(e,r,a){"use strict";a.d(r,{$H:function(){return k},$i:function(){return c},BG:function(){return S},FE:function(){return p},HU:function(){return h},NV:function(){return _},Rg:function(){return M},SV:function(){return d},XY:function(){return v},am:function(){return j},jc:function(){return E},t2:function(){return g},v0:function(){return w}});var n=a(5065),t=a(410),s=a(9524),i=a(5898),l=a(2038);let o=e=>{window.location.pathname!==l.AW.SETTING&&(window.location.href=e.emailCheck||e.oauth!==l.As.NONE?e.profileCheck?e.emojiCheck?l.AW.HOME:l.AW.EMOJI:l.AW.PROFILE:l.AW.VERIFY_EMAIL)},d=(0,n.hg)("loginSlice/postLogin",async(e,r)=>{let{getState:a}=r;try{let{user:e,password:r}=a().accountSlice,n=await t.Z.post("/user/login",{login_id:e.loginId,pw:r});return(0,s.S)(n.data)}catch(e){return Promise.reject({message:e.response.data.msg})}}),u=e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}),e.addCase(d.fulfilled,(e,r)=>{e.steps={...e.steps,...r.payload},e.loading=!1,o(e.steps)}),e.addCase(d.rejected,(e,r)=>{var a;e.error=null!==(a=r.error.message)&&void 0!==a?a:null,e.loading=!1})},c=e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}),e.addCase(d.fulfilled,(e,r)=>{e.user={...e.user,...r.payload},localStorage.setItem("id",e.user.id)}),e.addCase(d.rejected,(e,r)=>{var a;e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null})},g=(0,n.hg)("loginSlice/getLogin",async()=>{let e=await t.Z.get("/user/login");return(0,s.S)(e.data)}),f=e=>{e.addCase(g.pending,e=>{e.loading=!0,e.error=null}),e.addCase(g.fulfilled,(e,r)=>{e.steps={...e.steps,...r.payload}}),e.addCase(g.rejected,(e,r)=>{e.loading=!1})},h=(0,n.hg)("accountSlice/changeMyEmail",async(e,r)=>{let{getState:a}=r;try{let e=a(),r=await t.Z.patch("/user/email",{email:e.accountSlice.user.email});return(0,s.S)(r.data)}catch(e){return Promise.reject({message:e.response.data.msg})}}),m=e=>{e.addCase(h.pending,e=>{e.loading=!0,e.error=null}),e.addCase(h.fulfilled,(e,r)=>{e.steps={...e.steps,...r.payload},e.loading=!1}),e.addCase(h.rejected,(e,r)=>{var a,n;e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null,e.error=null!==(n=r.error.message)&&void 0!==n?n:null})},p=(0,n.hg)("loginSlice/getResendEmail",async()=>(await t.Z.get("/user/send-email")).data.status),C=e=>{e.addCase(p.pending,e=>{e.loading=!0,e.error=null}),e.addCase(p.fulfilled,(e,r)=>{e.isResendEmail=!0}),e.addCase(p.rejected,(e,r)=>{var a;e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null})},E=(0,n.hg)("loginSlice/getKaKaoLogin",async e=>{let{code:r,state:a}=e,n=await t.Z.get("/kakao/login?code=".concat(r,"&state=").concat(a));return(0,s.S)(n.data)}),N=e=>{e.addCase(E.pending,e=>{e.loading=!0,e.error=null}),e.addCase(E.fulfilled,(e,r)=>{e.steps={...e.steps,...r.payload},e.loading=!1,o(e.steps)}),e.addCase(E.rejected,(e,r)=>{var a;e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null})},w=e=>{e.addCase(E.pending,(e,r)=>{e.loading=!0,e.error=null}),e.addCase(E.fulfilled,(e,r)=>{e.user={...e.user,...r.payload},localStorage.setItem("id",e.user.id)}),e.addCase(E.rejected,(e,r)=>{var a;e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null})},O=(0,n.hg)("loginSlice/getGoogleLogin",async()=>{let e=await t.Z.get("/google/login");return(0,s.S)(e.data)}),I=e=>{e.addCase(O.pending,e=>{e.loading=!0,e.error=null}),e.addCase(O.fulfilled,(e,r)=>{e.steps={...e.steps,...r.payload},e.loading=!1,o(e.steps)}),e.addCase(O.rejected,(e,r)=>{var a;e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null})},j=e=>{e.addCase(O.pending,(e,r)=>{e.loading=!0,e.error=null}),e.addCase(O.fulfilled,(e,r)=>{e.user={...e.user,...r.payload},localStorage.setItem("id",e.user.id)}),e.addCase(O.rejected,(e,r)=>{var a;e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null})},v=(0,n.hg)("loginSlice/getVerifyEmail",async e=>{try{return(await t.Z.get("/user/verify-email?key=".concat(e))).status}catch(e){return Promise.reject({message:e.response.data.msg})}}),y=e=>{e.addCase(v.pending,e=>{e.loading=!0,e.error=null}),e.addCase(v.fulfilled,e=>{e.loading=!1,e.steps.emailCheck=!0}),e.addCase(v.rejected,(e,r)=>{var a;e.error=null!==(a=r.error.message)&&void 0!==a?a:null,e.loading=!1})},S=(0,n.hg)("loginSlice/getLogout",async()=>(await t.Z.post("/user/logout",{headers:{"Content-Type":"application/json"}})).status),A=e=>{e.addCase(S.pending,e=>{e.loading=!0,e.error=null}),e.addCase(S.fulfilled,e=>{i.E3,window.location.href=l.AW.LOGIN}),e.addCase(S.rejected,e=>{alert("로그아웃 실패했습니다.")})},L=(0,n.hg)("loginSlice/deleteUser",async()=>(await t.Z.delete("/user/unregister")).status),x=e=>{e.addCase(L.pending,e=>{e.loading=!0,e.error=null}),e.addCase(L.fulfilled,e=>{i.E3,window.location.href=l.AW.LOGIN}),e.addCase(L.rejected,(e,r)=>{var a;e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null})},k=(0,n.hg)("loginSlice/getResetPasswordEmail",async e=>(await t.Z.get("/user/reset-pw?login_id=".concat(e))).status),P=e=>{e.addCase(k.pending,e=>{e.loading=!0,e.error=null}),e.addCase(k.fulfilled,e=>{alert("비밀번호 재설정 메일을 보냈습니다. 확인해주세요.")}),e.addCase(k.rejected,(e,r)=>{var a;alert("존재하지 않는 로그인 id입니다."),e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null})},_=(0,n.hg)("accountSlice/patchUserProfile",async e=>{let r=await t.Z.patch("/user/profile",e);return(0,s.S)(r.data)}),b=e=>{e.addCase(_.pending,e=>{e.loading=!0,e.error=null}),e.addCase(_.fulfilled,(e,r)=>{e.steps={...e.steps,...r.payload},e.loading=!1,alert("프로필이 업데이트 되었습니다."),o(e.steps)}),e.addCase(_.rejected,(e,r)=>{var a;e.loading=!1,e.error=null!==(a=r.error.message)&&void 0!==a?a:null})},M=e=>{m(e),f(e),u(e),C(e),N(e),I(e),y(e),A(e),x(e),P(e),b(e)}},5898:function(e,r,a){"use strict";a.d(r,{E3:function(){return i},UY:function(){return u},e3:function(){return d},sT:function(){return o}});var n=a(5065),t=a(2038),s=a(1561);let i={idPasswordLoginFormView:!1,isResendEmail:!1,steps:{emailCheck:!1,profileCheck:!1,emojiCheck:!1,oauth:t.As.NONE},link:"",loading:!1,error:null},l=(0,n.oM)({name:"loginSlice",initialState:i,reducers:{closeLoginError:e=>{e.error=null},setIdPasswordLoginFormView:(e,r)=>{e.idPasswordLoginFormView=r.payload},setError(e,r){e.error=r.payload}},extraReducers:e=>(0,s.Rg)(e)}),{setError:o,setIdPasswordLoginFormView:d,closeLoginError:u}=l.actions;l.reducer,r.ZP=l.reducer},7789:function(e,r,a){"use strict";var n=a(1633);a.o(n,"usePathname")&&a.d(r,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(r,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(r,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[437,60,670,744],function(){return e(e.s=8869)}),_N_E=e.O()}]);